<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced MIMO Wireless Communication Equalizer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="container-fluid">
        <div class="main-header">
            <h1>Advanced MIMO Wireless Communication Equalizer</h1>
            <p>Interactive Simulation with Complex Channels & Constellation Analysis</p>
        </div>

        <div class="experiment-container">
            <div class="tab-container">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="equalizer-tab" data-bs-toggle="tab" data-bs-target="#equalizer" type="button" role="tab">Equalizer Simulation</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="performance-tab" data-bs-toggle="tab" data-bs-target="#performance" type="button" role="tab">Performance Analysis</button>
                    </li>
                </ul>
            </div>

            <div class="tab-content">
                <div class="tab-pane fade show active" id="equalizer" role="tabpanel">
                    <div class="instructions-card">
                        <h3>MIMO Experiment Instructions</h3>
                        <ol>
                            <li>Select your modulation scheme and MIMO configuration (Nt transmit Ã— Nr receive antennas).</li>
                            <li>Set the desired SNR and click **Simulate Channel** to run equalization.</li>
                            <li>Observe the signal flow, performance metrics, and constellation plots.</li>
                            <li>Click **Run with New Symbols** to repeat with new random symbols.</li>
                        </ol>
                    </div>

                    <div class="row">
                        <div class="col-xl-3 col-lg-4 col-md-12">
                            <div class="control-panel">
                                <h4>Inputs</h4>
                                <div class="input-group horizontal">
                                    <label for="modulationScheme">Modulation:</label>
                                    <select class="form-select" id="modulationScheme">
                                        <option value="BPSK">BPSK</option>
                                        <option value="QPSK" selected>QPSK</option>
                                        <option value="16QAM">16-QAM</option>
                                        <option value="64QAM">64-QAM</option>
                                    </select>
                                </div>
                                <div class="input-group horizontal">
                                    <label for="numTxAntennas">Tx Antennas (Nt):</label>
                                    <select class="form-select" id="numTxAntennas">
                                        <option value="2" selected>2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="6">6</option>
                                        <option value="8">8</option>
                                        <option value="16">16</option>
                                    </select>
                                </div>
                                <div class="input-group horizontal">
                                    <label for="numRxAntennas">Rx Antennas (Nr):</label>
                                    <select class="form-select" id="numRxAntennas">
                                        <option value="2" selected>2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="6">6</option>
                                        <option value="8">8</option>
                                        <option value="16">16</option>
                                    </select>
                                </div>
                                <div class="input-group horizontal">
                                    <label for="snrInput">SNR (dB):</label>
                                    <input type="number" class="form-control" id="snrInput" value="10" min="0" max="40" step="1">
                                </div>
                                
                                <button class="btn btn-primary w-100 mt-3" id="simulateBtn" onclick="runSimulation()">Simulate Channel</button>
                                <button class="btn btn-secondary w-100 mt-3" id="regenerateBtn" onclick="runSimulation()" style="display:none;">Run with New Symbols</button>

                                <div class="technique-selector" id="techniqueSelector" style="display: none;">
                                    <h5>Equalizer Type:</h5>
                                    <div class="technique-options">
                                        <div class="technique-option">
                                            <input type="radio" id="zf" name="technique" value="ZF" checked onchange="updateDisplay()">
                                            <label for="zf">ZF</label>
                                        </div>
                                        <div class="technique-option">
                                            <input type="radio" id="mmse" name="technique" value="MMSE" onchange="updateDisplay()">
                                            <label for="mmse">MMSE</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-6 col-lg-8 col-md-12">
                            <div class="visualization-area">
                                <div id="loadingIndicator" class="loading"><div class="spinner"></div><p>Processing...</p></div>
                                <div class="signal-flow" id="signalFlow">
                                    </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-lg-12 col-md-12">
                            <div class="output-panel" id="resultsContainer" style="display: none;">
                                <div class="results-panel">
                                    <h4>Performance</h4>
                                    <div class="metric-card"><div class="metric-label">Symbol Error Rate (SER)</div><div class="metric-value" id="serValue">-</div></div>
                                    <div class="metric-card"><div class="metric-label">Symbols in Error</div><div class="metric-value" id="errorCount">-</div></div>
                                    <div class="metric-card"><div class="metric-label">Channel Condition</div><div class="metric-value" id="conditionNumber">-</div></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12" id="constellationSection" style="display: none;">
                            <div class="constellation-container">
                                <div class="constellation-plot"><h5>Original Transmitted</h5><canvas id="originalConstellation"></canvas></div>
                                <div class="constellation-plot"><h5>Channel Distorted + Noise</h5><canvas id="distortedConstellation"></canvas></div>
                                <div class="constellation-plot" id="equalizedPlot"><h5>Equalized (ZF)</h5><canvas id="equalizedConstellation"></canvas></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="performance" role="tabpanel">
                    <div class="instructions-card">
                        <h3>Performance Analysis</h3>
                        <p>This chart shows the theoretical Symbol Error Rate (SER) versus the Signal-to-Noise Ratio (SNR) for the selected modulation scheme and MIMO configuration. It compares the performance of Zero-Forcing (ZF) and Minimum Mean Square Error (MMSE) equalizers across different noise levels.</p>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="chart-container" id="serChartContainer" >
                                <div id="chartLoadingIndicator" class="loading" style="display:flex;"><div class="spinner"></div><p>Calculating SER vs SNR curve...</p></div>
                                <h4>Symbol Error Rate vs. SNR</h4>
                                <canvas id="serChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="./js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
   
</body>
</html>